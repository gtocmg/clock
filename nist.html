<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NIST Clock</title>
<style>
    body {
        background: #000;
        color: #fff;
        margin: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: Arial, sans-serif;
        font-size: 48px;
        letter-spacing: 2px;
    }
</style>
</head>
<body>

<div id="clock">Loading...</div>

<script>
// convertit le timestamp NIST en Date JS
function updateClock() {
    fetch("https://time.gov/actualtime.cgi")
        .then(r => r.text())
        .then(xml => {
            const match = xml.match(/time="(\d+)"/);
            if (!match) return;

            const ms = parseInt(match[1], 10) / 1000; // millisecondes → secondes
            const date = new Date(ms);

            // --- Format 24h ---
            let h = String(date.getUTCHours()).padStart(2, '0');
            let m = String(date.getUTCMinutes()).padStart(2, '0');
            let s = String(date.getUTCSeconds()).padStart(2, '0');

            // Affiche HH:MM:SS
            document.getElementById("clock").textContent = `${h}:${m}:${s}`;
        })
        .catch(() => {
            document.getElementById("clock").textContent = "NIST ERROR";
        });
}

// Mise à jour immédiate + chaque seconde
updateClock();
setInterval(updateClock, 1000);
</script>

</body>
</html>
